# ─── Lab Oven Booking System ──────────────────────────────────────────
# Docker Compose service block for the web-oven app.
# Connects to the existing x01_db PostgreSQL container via the
# external network x01-bot_x01_net.
#
# USAGE:
#   docker compose up -d --build
#
# PRE-REQUISITE: Create the database and user in x01_db first.
# See README.md for the one-time SQL setup.
# ──────────────────────────────────────────────────────────────────────

services:
  web-oven:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: web-oven
    restart: unless-stopped
    ports:
      - "3005:3000"
    environment:
      - DATABASE_URL=postgresql://oven_user:x154@x01_db:5432/oven_booking_db
      - NEXTAUTH_URL=http://oven.g-labs.my.id:3005
      - NEXTAUTH_SECRET=${NEXTAUTH_SECRET:-pQVq8zaXw69TMcXKIe+grxUI77FmaXnZb66G6jvY5ZU=}
      - ADMIN_EMAIL=${ADMIN_EMAIL:-admin@g-labs.local}
      - ADMIN_PASSWORD=${ADMIN_PASSWORD:-admin}
      - ADMIN_NAME=${ADMIN_NAME:-Gerald}
      - TZ=Asia/Jakarta
      - PGTZ=Asia/Jakarta
    networks:
      - x01_net

networks:
  x01_net:
    external: true
    name: x01-bot_x01_net
